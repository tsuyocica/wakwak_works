<div class="container">
  <!-- âœ… ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div class="hero-container">
    <!-- ğŸ”¥ ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ -->
    <div class="hero-text">
      <h2 class="fw-bold">ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ãŒæ´»ã‹ã›ã‚‹ç¾å ´ãŒã“ã“ã«ï¼</h2>
      <p class="text-warning">æ–½å·¥ç®¡ç†è€…ã¨ä½œæ¥­å“¡ã‚’ã¤ãªãã€æ–°ã—ã„åƒãæ–¹ã‚’æä¾›ã—ã¾ã™ã€‚</p>
    </div>
    <!-- ğŸ¥ ãƒ’ãƒ¼ãƒ­ãƒ¼å‹•ç”» -->
    <video class="hero-video" autoplay loop muted preload="auto">
      <source src="<%= video_path('hero2-movie.mp4') %>" type="video/mp4">
      ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯å‹•ç”»ã‚’å†ç”Ÿã§ãã¾ã›ã‚“ã€‚
    </video>
  </div>

  <!-- âœ… ä½œæ¥­æ¡ˆä»¶ä¸€è¦§ã®ã‚¿ã‚¤ãƒˆãƒ« -->
  <div class="text-center my-4">
    <hr>
    <h1 class="fw-bold text-primary fs-3">ä½œæ¥­æ¡ˆä»¶ä¸€è¦§</h1>
    <hr>
  </div>

  <!-- âœ… æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
  <%= render "search_form" %>

  <!-- âœ… ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ‡æ›¿ï¼ˆã‚¿ã‚¤ãƒˆãƒ« + ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ï¼‰ -->
  <% if user_signed_in? %>
    <div class="d-flex align-items-center justify-content-between mb-3">
      <div class="d-flex align-items-center">
        <h5 class="fw-bold me-3 mb-0">ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ‡æ›¿</h5>
        <div class="btn-group">
          <%= button_to "æ–½å·¥ç®¡ç†è€…", switch_role_users_path(role: "æ–½å·¥ç®¡ç†è€…"), method: :patch,
              class: "btn btn-sm #{current_user.role == 'æ–½å·¥ç®¡ç†è€…' ? 'btn-primary' : 'btn-outline-secondary'} w-150",
              disabled: current_user.role == 'æ–½å·¥ç®¡ç†è€…', data: { turbo: false } %>

          <%= button_to "ä½œæ¥­å“¡", switch_role_users_path(role: "ä½œæ¥­å“¡"), method: :patch,
              class: "btn btn-sm #{current_user.role == 'ä½œæ¥­å“¡' ? 'btn-primary' : 'btn-outline-secondary'} w-150",
              disabled: current_user.role == 'ä½œæ¥­å“¡', data: { turbo: false } %>
        </div>
      </div>

      <!-- âœ… æ–½å·¥ç®¡ç†è€…ã®ã¿ã€Œæ¡ˆä»¶ã‚’æŠ•ç¨¿ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º -->
      <% if current_user.role == "æ–½å·¥ç®¡ç†è€…" %>
        <%= link_to "æ¡ˆä»¶ã‚’æŠ•ç¨¿ã™ã‚‹", new_job_post_path, class: "btn btn-info d-flex align-items-center justify-content-start mb-3" %>
      <% end %>
    </div>
  <% end %>

  <!-- âœ… è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
  <div class="d-flex justify-content-end mb-3">
    <button id="toggle-view-btn" class="btn btn-outline-primary">
      ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤º
    </button>
  </div>

  <!-- âœ… ã‚«ãƒ¼ãƒ‰å½¢å¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ -->
  <%= render "card_view", job_posts: @job_posts %>

  <!-- âœ… ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ï¼ˆéè¡¨ç¤ºï¼‰ -->
  <%= render "table_view", job_posts: @job_posts %>
</div>

<!-- âœ… JavaScriptï¼ˆç›´æ¥åŸ‹ã‚è¾¼ã¿ï¼‰ -->
<script>
  document.addEventListener("turbo:load", function() {
    console.log("âœ… è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ");

    const toggleBtn = document.getElementById("toggle-view-btn");
    const cardView = document.getElementById("card-view");
    const tableView = document.getElementById("table-view");

    if (!toggleBtn || !cardView || !tableView) {
      console.warn("âš  å¿…è¦ãªè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
      return;
    }

    toggleBtn.addEventListener("click", function() {
      if (cardView.hidden) {
        // ã‚«ãƒ¼ãƒ‰å½¢å¼ã‚’è¡¨ç¤º
        cardView.hidden = false;
        tableView.hidden = true;
        toggleBtn.textContent = "ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤º";
      } else {
        // ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã‚’è¡¨ç¤º
        cardView.hidden = true;
        tableView.hidden = false;
        toggleBtn.textContent = "ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤º";
      }
    });
  });
</script>